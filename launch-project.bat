@echo off
chcp 65001 >nul
echo.
echo ========================================
echo    ?? Metacoding Studio ???
echo ========================================
echo.
echo ?????????...
echo.

REM ???????
cd /d "%~dp0"

REM ????
echo ??1: ??????...
powershell -ExecutionPolicy Bypass -File "fix-templates.ps1"

REM ?????
echo.
echo ??2: ???????...
echo ??: http://localhost:5173
echo ? Ctrl+C ?????
echo.

REM ???????
if exist "node_modules\.vite" rmdir /s /q "node_modules\.vite"

REM ??
call npm run dev

if errorlevel 1 (
    echo.
    echo ? ?????
    echo ???:
    echo 1. ????????????
    echo 2. ?? 5173 ????
    echo 3. ?? fix-templates.ps1 ????
    echo.
    pause
)
